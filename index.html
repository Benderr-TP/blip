<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Introduction | Blip</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Build Status">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./docs/StartHere.html" />
    
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="0"
        data-chapter-title="Introduction"
        data-filepath="README.md"
        data-basepath="."
        data-revision="Tue Nov 22 2016 12:10:30 GMT-0800 (PST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter active" data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="docs/StartHere.html">
            
                
                    <a href="./docs/StartHere.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Blip developer guide
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="docs/FeatureOverview.html">
            
                
                    <a href="./docs/FeatureOverview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        overview of features
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/DirectoryStructure.html">
            
                
                    <a href="./docs/DirectoryStructure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        app &amp; directory structure
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/Architecture.html">
            
                
                    <a href="./docs/Architecture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        architecture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/CodeStyle.html">
            
                
                    <a href="./docs/CodeStyle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        code style
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="docs/Dependencies.html">
            
                
                    <a href="./docs/Dependencies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        usage of dependencies
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="docs/React.html">
            
                
                    <a href="./docs/React.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        React
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="docs/ReactRouter.html">
            
                
                    <a href="./docs/ReactRouter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        React Router
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="docs/Redux.html">
            
                
                    <a href="./docs/Redux.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Redux
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="docs/StateTreeGlossary.html">
            
                
                    <a href="./docs/StateTreeGlossary.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.1.</b>
                        
                        Glossary of state tree terms
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="docs/Webpack.html">
            
                
                    <a href="./docs/Webpack.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        webpack
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="docs/Misc.html">
            
                
                    <a href="./docs/Misc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        misc
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="docs/IntegrationTesting.html">
            
                
                    <a href="./docs/IntegrationTesting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        integration testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="docs/FakeChildAccounts.html">
            
                
                    <a href="./docs/FakeChildAccounts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        &quot;fake child accounts&quot;
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Blip</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="blip">Blip</h1>
<p><a href="https://travis-ci.org/tidepool-org/blip" target="_blank"><img src="https://img.shields.io/travis/tidepool-org/blip/master.svg" alt="Build Status"></a></p>
<p>Blip is a web app for type 1 diabetes (T1D) built on top of the <a href="http://tidepool.org/" target="_blank">Tidepool</a> platform. It allows patients and their &quot;care team&quot; (family, doctors) to visualize their diabetes device data (from insulin pumps, BGMs, and/or CGMs) and message each other.</p>
<p>This README is focused on just the details of getting blip running locally. For more detailed information aimed at those working on the development of blip, please see the <a href="docs/StartHere.html">developer guide</a>.</p>
<hr>
<h3 id="table-of-contents">Table of contents</h3>
<ul>
<li><a href="#install">Install</a></li>
<li><a href="#running-locally">Running locally</a><ul>
<li><a href="#getting-past-email-verification-for-a-user-created-locally">&quot;Verifying&quot; the e-mail of a new account locally</a></li>
<li><a href="#creating-a-user-without-email-verification">Creating a special account to bypass e-mail verification</a></li>
</ul>
</li>
<li><a href="#running-against-dev">Running against <code>dev</code></a></li>
<li><a href="#config">Config</a></li>
<li><a href="#debugging">Debugging</a></li>
<li><a href="#running-the-tests">Running the tests</a></li>
<li><a href="#build-and-deployment">Build and deployment</a></li>
</ul>
<hr>
<h2 id="install">Install</h2>
<p>Requirements:</p>
<ul>
<li><a href="http://nodejs.org/" title="Node.js" target="_blank">Node.js</a></li>
<li><a href="https://www.npmjs.com/" title="npm" target="_blank">npm</a> version 3.x or higher</li>
</ul>
<p>Clone this repo <a href="https://github.com/tidepool-org/blip" title="GitHub: blip" target="_blank">from GitHub</a>, then install the dependencies:</p>
<pre><code class="lang-bash">$ npm install
</code></pre>
<h2 id="running-locally">Running locally</h2>
<p>If you&apos;re running the entire Tidepool platform locally as per <a href="http://developer.tidepool.io/starting-up-services/" title="Tidepool developer portal: starting services" target="_blank">starting services</a>, you can start blip using your local platform with:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">source</span> config/local.sh
$ npm start
</code></pre>
<p>Open your web browser and navigate to <code>http://localhost:3000/</code>.</p>
<p>(See also: <a href="http://developer.tidepool.io/docs/recipes/index.html#a-running-the-platform-locally-with-runservers-but-blip-with-hot-module-replacement-hmr-via-webpack" title="Tidepool developer portal: front end recipes" target="_blank">recipe for running blip locally with hot module replacement</a>.)</p>
<h3 id="getting-past-email-verification-for-a-user-created-locally">Getting past e-mail verification for a user created locally</h3>
<p>When running locally with runservers, no e-mail will be sent to a sign-up e-mail address, and so a workaround is needed to get past the e-mail verification step for a newly created local account being used for development. What you need to do is construct the login URL that is provided in a link in the verification e-mail <em>manually</em> by finding the correct ID for the e-mail confirmation. There are two ways to do this: by looking in the local <code>server.log</code> (located at the root level of where you&apos;ve cloned all the Tidepool repositories) or by finding it in your local Mongo database. The steps for the latter are:</p>
<ul>
<li>start a Mongo shell in a fresh Terminal window with <code>mongo</code></li>
<li>switch to the <code>confirm</code> database with <code>use confirm</code></li>
<li>find the pending account with <code>db.confirmations.find({status: &apos;pending&apos;});</code></li>
<li>copy the <code>_id</code> from the pending confirmation record with an <code>email</code> matching the account you&apos;ve just created and provide it as a <code>signupKey</code> parameter in the login URL: <code>http://localhost:3000/login?signUpKey=&lt;_id&gt;</code></li>
</ul>
<h3 id="creating-a-user-without-email-verification">Creating a user without e-mail verification</h3>
<p>When running locally, there is also workaround so you don&apos;t have to verify the e-mail address of a new user: if you create a new user and add the localhost secret +skip to the e-mail address - e.g. <code>me+skip@something.org</code> - this will then allow you to login straightaway, skipping the e-mail verification step.</p>
<p><strong>NB: The UI is <em>not</em> guaranteed to display correctly for +skip-created users on all pages, and so &#x1F4A3; <em>THIS WORKFLOW IS NOT CURRENTLY RECOMMENDED</em> &#x1F4A3;. For now, you must create a normal account (without +skip) if you want to work on the sign-up flow, although we have plans to fix the way the +skip workaround operates on the platform to address this.</strong></p>
<h2 id="running-against-dev">Running against <code>dev</code></h2>
<p>By default&#x2014;that is, if you don&apos;t <code>source</code> a different configuration, such as the <code>local.sh</code> configuration for local development with runservers referenced above&#x2014;if you simply run <code>npm start</code> in this repository after installing the dependencies, blip will start up running against Tidepool&apos;s &quot;dev&quot; server environment.</p>
<h2 id="config">Config</h2>
<p>Configuration values are set with environment variables (see <code>config/local.sh</code>).</p>
<p>You can set environment variables manually using <code>export VAR=value</code>, or use a bash script. For example:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">source</span> config/local.sh
</code></pre>
<p>Ask the project owners to provide you with config scripts for different environments, or you can create one of your own if you have a custom environment. It is recommended to put all config scripts in the <code>config/</code> directory, where they will be ignored by Git.</p>
<h2 id="debugging">Debugging</h2>
<p>The app uses the <a href="http://latentflip.com/bows/" target="_blank">bows</a> library to log debugging messages to the browser&apos;s console. It is disabled by default (which makes it production-friendly). To see the messages type <code>localStorage.debug = true</code> in the browser console and refresh the page. Create a logger for a particular app module by giving it a name, such as:</p>
<pre><code class="lang-javascript">app.foo = {
  log: bows(<span class="hljs-string">&apos;Foo&apos;</span>),
  bar: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.log(<span class="hljs-string">&apos;Walked into a bar&apos;</span>);
  }
};
</code></pre>
<h2 id="running-the-tests">Running the tests</h2>
<p>We use <a href="http://visionmedia.github.io/mocha/" target="_blank">Mocha</a> with <a href="http://chaijs.com/" target="_blank">Chai</a> for our test framework inside <a href="https://karma-runner.github.io/" target="_blank">Karma</a> as our test runner, as well as <a href="http://sinonjs.org/" target="_blank">Sinon.JS</a> and <a href="https://github.com/domenic/sinon-chai" target="_blank">Sinon-Chai</a> for spies and stubs. Our tests currently run on <a href="http://phantomjs.org/" target="_blank">PhantomJS</a>, a headless WebKit browser, or Chrome (locally only).</p>
<p>To run the unit tests, use:</p>
<pre><code class="lang-bash">$ npm <span class="hljs-built_in">test</span>
</code></pre>
<p>To run the unit tests in Chrome, use:</p>
<pre><code class="lang-bash">$ npm run browser-tests
</code></pre>
<p>To run the unit tests in watch mode, use:</p>
<pre><code class="lang-bash">$ npm run <span class="hljs-built_in">test</span>-watch
</code></pre>
<h2 id="build-and-deployment">Build and deployment</h2>
<p>The app is built as a static site in the <code>dist/</code> directory.</p>
<p>We use <a href="https://github.com/tidepool-org/shio" target="_blank">Shio</a> to deploy, so we separate the build in two.</p>
<p>Shio&apos;s <code>build.sh</code> script will take care of building the app itself with:</p>
<pre><code class="lang-bash">$ npm run build-app
</code></pre>
<p>Shio&apos;s <code>start.sh</code> script then builds the config from environment variables as a separate file with:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">source</span> config/env.sh
$ npm run build-config
</code></pre>
<p>After that, the app is ready to be served using the static web server included in this repo:</p>
<pre><code class="lang-bash">$ npm run server
</code></pre>
<p>You can also build everything at once locally to test the production build by simply running:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">source</span> config/local.sh
$ npm run build
$ npm run server
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        
        <a href="./docs/StartHere.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Blip developer guide"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
